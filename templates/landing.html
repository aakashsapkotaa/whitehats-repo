<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading - EduHub</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="bg-glow"></div>

    <div class="loading-screen">
        <!-- Animated Logo -->
        <div style="position:relative; margin-bottom:40px;">
            <div
                style="position:absolute; inset:0; background:#55D6BE; filter:blur(60px); opacity:0.3; border-radius:50%;">
            </div>
            <img src="/static/images/LOGO_WHITE.png" alt="Loading" class="logo-loader"
                style="position:relative; z-index:10;">
        </div>

        <!-- Quote -->
        <div
            style="max-width:600px; text-align:center; padding:0 24px; min-height:100px; display:flex; flex-direction:column; justify-content:center;">
            <p id="quote-text"
                style="font-size:20px; font-weight:300; font-style:italic; color:#F5F3F5; line-height:1.6;"></p>
            <p id="quote-author"
                style="font-size:13px; font-weight:700; color:#55D6BE; margin-top:16px; text-transform:uppercase; letter-spacing:2px; opacity:0; transition:opacity 1s;">
            </p>
        </div>

        <!-- Loading Bar -->
        <div style="width:256px; height:4px; background:#333; border-radius:4px; margin-top:32px; overflow:hidden;">
            <div class="loading-bar" style="height:100%; width:50%; background:#55D6BE; border-radius:4px;"></div>
        </div>
        <p style="font-size:12px; color:#666; margin-top:12px;" class="fade-in">Syncing resources...</p>
    </div>

    <script>
        // Redirect if not logged in
        if (!localStorage.getItem('eduhub_token')) {
            window.location.href = '/login';
        }

        async function loadQuote() {
            const textEl = document.getElementById('quote-text');
            const authorEl = document.getElementById('quote-author');
            let quote = { text: "Sharing knowledge is the first step toward collective growth.", author: "EduHub" };

            try {
                const res = await fetch('/api/quotes/random');
                if (res.ok) quote = await res.json();
            } catch (e) { }

            // Typewriter effect
            let i = 0;
            textEl.innerHTML = '';
            function type() {
                if (i < quote.text.length) {
                    textEl.innerHTML += quote.text.charAt(i);
                    i++;
                    setTimeout(type, 35);
                } else {
                    setTimeout(() => {
                        authorEl.textContent = 'â€” ' + quote.author;
                        authorEl.style.opacity = '1';
                    }, 300);
                }
            }
            type();
        }

        loadQuote();

        // Redirect to dashboard after 4 seconds
        setTimeout(() => {
            window.location.href = '/dashboard';
        }, 4500);
    </script>
</body>

</html>